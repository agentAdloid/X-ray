{"ast":null,"code":"import _classCallCheck from\"/home/agenta/Desktop/Adloid/x-ray/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/agenta/Desktop/Adloid/x-ray/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/agenta/Desktop/Adloid/x-ray/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/agenta/Desktop/Adloid/x-ray/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/agenta/Desktop/Adloid/x-ray/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./Xray.css';import Aux from'../../hoc/Aux';import Button from'../../UI/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var XRay=/*#__PURE__*/function(_Component){_inherits(XRay,_Component);var _super=_createSuper(XRay);function XRay(props){var _this;_classCallCheck(this,XRay);_this=_super.call(this,props);//console.log('hi');\n//console.log('bi');\n_this.componentDidMount=function(){_this.updateWidthHeight();window.addEventListener('resize',_this.updateWidthHeight);};_this.getDiameter=function(){var _this$state=_this.state,diameter=_this$state.diameter,resize=_this$state.resize;var getMaxResWidth=_this.getMaxResize(resize);var newDiameter=_this.matchesWindow(resize);if(_this.state.responsive){if(window.matchMedia(\"(min-width: \".concat(getMaxResWidth+1,\"px)\")).matches){return newDiameter>diameter?newDiameter:diameter;}else{return newDiameter;}}else{return diameter;}};_this.updateWidthHeight=function(){var beyond=_this.state.beyond;var naturalWidth=_this.firstImg.naturalWidth;var naturalHeight=_this.firstImg.naturalHeight;var percent=naturalWidth/naturalHeight;var width=_this.firstImg.clientWidth;var height=Math.round(width/percent);var dim=_this.getDiameter();//console.log(window.screen.width);\nvar centerX=0;var centerY=0;var sensor;if(beyond){sensor={width:width+dim,height:height+dim,top:-(dim/2),left:-(dim/2)};}else{sensor={width:width,height:height,top:0,left:0};}_this.centerY=Math.round(height/2)+Math.round(dim/2);_this.centerX=Math.round(width/2)+Math.round(dim/2);// console.log(width + ' ' + height + ' ' + dim);\n_this.setState({width:width,height:height,dim:dim,sensor:sensor,centerX:centerX,centerY:centerY});};_this.getMaxResize=function(diameter){var newDiameter=diameter[0].screen;for(var i=0;i<diameter.length;i++){if(diameter[i].screen>newDiameter){newDiameter=diameter[i].screen;}}return newDiameter;};_this.matchesWindow=function(diameter){var newDiameter=diameter[0].diameter;for(var i=0;i<diameter.length;i++){if(window.matchMedia(\"(max-width: \".concat(diameter[i].screen,\"px)\")).matches){newDiameter=diameter[i].diameter;}}return newDiameter;};_this.HoverSensor=function(event){var positionX=event.layerX+_this.centerX;var positionY=event.layerY+_this.centerY;console.log(positionX+' '+event.layerX);console.log(positionY+' '+event.layerY);var _this$state2=_this.state,sensor=_this$state2.sensor,dim=_this$state2.dim,beyond=_this$state2.beyond;var position={startY:0,endY:sensor.height,startX:0,endX:sensor.width};var coefficient=dim/2;var zoomPosition;if(beyond){zoomPosition=dim/2;}else{zoomPosition=0;}if(positionY>=position.startY+coefficient&&positionY<=position.endY-coefficient){_this.zoom.style.top=\"\".concat(positionY-coefficient-zoomPosition,\"px\");_this.lastImg.style.top=\"\".concat(-positionY+coefficient+zoomPosition,\"px\");}else if(positionY<position.startY+coefficient){_this.zoom.style.top=\"\".concat(position.startY-zoomPosition,\"px\");_this.lastImg.style.top=\"\".concat(position.startY+zoomPosition,\"px\");}else if(positionY>position.endY-coefficient){_this.zoom.style.top=\"\".concat(position.endY-dim-zoomPosition,\"px\");_this.lastImg.style.top=\"\".concat(-position.endY+dim+zoomPosition,\"px\");}if(positionX>=position.startX+coefficient&&positionX<=position.endX-coefficient){_this.zoom.style.left=\"\".concat(positionX-coefficient-zoomPosition,\"px\");_this.lastImg.style.left=\"\".concat(-positionX+coefficient+zoomPosition,\"px\");}else if(positionX<position.startX+coefficient){_this.zoom.style.left=\"\".concat(position.startX-zoomPosition,\"px\");_this.lastImg.style.left=\"\".concat(position.startX+zoomPosition,\"px\");}else if(positionX>position.endX-coefficient){_this.zoom.style.left=\"\".concat(position.endX-dim-zoomPosition,\"px\");_this.lastImg.style.left=\"\".concat(-position.endX+dim+zoomPosition,\"px\");}_this.setState({centerX:event.layerX,centerY:event.layerY});// console.log(this.zoom.style.left + ' xx  ' + positionX + ' endxx' + position.endX);\n//console.log(this.zoom.style.top + ' yy ' + positionY + 'endyy' + position.endY);\n};_this.move=function(event){var transform=_this.state.transform;if(transform){_this.setState({transform:false});}_this.HoverSensor(event);};_this.onLeftPress=function(){if(_this.state.centerX+Math.round(_this.state.width/2)<=0){return;}_this.move({layerX:_this.state.centerX-10,layerY:_this.state.centerY});};_this.onRightPress=function(){if(_this.state.centerX>=Math.round(_this.state.width/2)){return;}_this.move({layerX:_this.state.centerX+10,layerY:_this.state.centerY});};_this.onTopPress=function(){if(_this.state.centerY+Math.round(_this.state.height/2)<=0){return;}_this.move({layerX:_this.state.centerX,layerY:_this.state.centerY-10});};_this.onBottomPress=function(){if(_this.state.centerY>=Math.round(_this.state.height/2)){return;}_this.move({layerX:_this.state.centerX,layerY:_this.state.centerY+10});};_this.state={transform:true,images:_this.props.images,cursor:_this.props.cursor||false,diameter:_this.props.diameter||150,beyond:_this.props.beyond||false,width:null,height:null,dim:null,type:_this.props.type||'circle',sensor:{width:null,height:null,top:null,left:null},responsive:_this.props.responsive||false,resize:_this.props.resize||[{screen:1199,diameter:130},{screen:991,diameter:100},{screen:767,diameter:80},{screen:575,diameter:50}],centerX:0,centerY:0};_this.move=_this.move.bind(_assertThisInitialized(_this));return _this;}_createClass(XRay,[{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,images=_this$state3.images,cursor=_this$state3.cursor,transform=_this$state3.transform,width=_this$state3.width,height=_this$state3.height,dim=_this$state3.dim,sensor=_this$state3.sensor,type=_this$state3.type;var parentClass=cursor?'x-ray-photo-parent':'x-ray-photo-parent cursor-none';var parentTransform=transform?'x-ray-last-photo transform':'x-ray-last-photo';var lastImage=transform?'x-ray-last-photo-img transform':'x-ray-last-photo-img';var lastStyle={width:\"\".concat(dim,\"px\"),height:\"\".concat(dim,\"px\")};return/*#__PURE__*/_jsxs(Aux,{children:[/*#__PURE__*/_jsxs(\"div\",{className:parentClass,children:[/*#__PURE__*/_jsx(\"img\",{ref:function ref(img){_this2.firstImg=img;//console.log(\"image1\");\n//if(img!=null)\n// {console.log(this.firstImg.style.top);\n// console.log(this.firstImg.style.left);\n//}\n},src:images[0],alt:\"first-photo\",className:\"x-ray-first-photo\"}),/*#__PURE__*/_jsxs(\"div\",{ref:function ref(zoom){_this2.zoom=zoom;//console.log(zoom);\n},className:parentTransform,style:lastStyle,children:[type==='magnifyingGlass'?/*#__PURE__*/_jsx(\"div\",{className:\"magnifyingGlass\"}):null,/*#__PURE__*/_jsx(\"div\",{className:\"x-ray-last-photo-img-parent\",children:/*#__PURE__*/_jsx(\"img\",{ref:function ref(img){_this2.lastImg=img;///console.log(img + \"image2\");\n},style:{width:\"\".concat(width,\"px\"),height:\"\".concat(height,\"px\")},src:images[1],alt:\"last-photo\",className:lastImage})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"x-ray-sensor\",style:sensor,onMouseMove:this.move})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Buttons\",children:[/*#__PURE__*/_jsx(Button,{clicked:this.onLeftPress,children:\"Left\"}),/*#__PURE__*/_jsx(Button,{clicked:this.onRightPress,children:\"Right\"}),/*#__PURE__*/_jsx(Button,{clicked:this.onBottomPress,children:\"Bottom\"}),/*#__PURE__*/_jsx(Button,{clicked:this.onTopPress,children:\"Top\"})]})]});}}]);return XRay;}(Component);export{XRay as default};","map":{"version":3,"sources":["/home/agenta/Desktop/Adloid/x-ray/src/components/Xray/Xray.js"],"names":["React","Component","Aux","Button","XRay","props","componentDidMount","updateWidthHeight","window","addEventListener","getDiameter","state","diameter","resize","getMaxResWidth","getMaxResize","newDiameter","matchesWindow","responsive","matchMedia","matches","beyond","naturalWidth","firstImg","naturalHeight","percent","width","clientWidth","height","Math","round","dim","centerX","centerY","sensor","top","left","setState","screen","i","length","HoverSensor","event","positionX","layerX","positionY","layerY","console","log","position","startY","endY","startX","endX","coefficient","zoomPosition","zoom","style","lastImg","move","transform","onLeftPress","onRightPress","onTopPress","onBottomPress","images","cursor","type","bind","parentClass","parentTransform","lastImage","lastStyle","img"],"mappings":"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","sourcesContent":["\nimport React, {Component} from 'react';\nimport './Xray.css';\nimport Aux from '../../hoc/Aux';\nimport Button from '../../UI/Button';\nexport default class XRay extends Component{\n    constructor(props){\n        super(props);\n        //console.log('hi');\n        //console.log('bi');\n        this.state = {\n            transform: true,\n            images: this.props.images,\n            cursor: this.props.cursor || false,\n            diameter: this.props.diameter || 150,\n            beyond: this.props.beyond || false,\n            width: null,\n            height: null,\n            dim: null,\n            type: this.props.type || 'circle',\n            sensor: {\n                width: null,\n                height: null,\n                top: null,\n                left: null\n            },\n            responsive: this.props.responsive || false,\n            resize: this.props.resize || [\n                {\n                    screen: 1199,\n                    diameter: 130\n                },\n                {\n                    screen: 991,\n                    diameter: 100\n                },\n                {\n                    screen: 767,\n                    diameter: 80\n                },\n                {\n                    screen: 575,\n                    diameter: 50\n                }\n            ],\n            centerX: 0 ,\n            centerY: 0\n        };\n        this.move = this.move.bind(this);\n    }\n\n    componentDidMount = () =>{\n        this.updateWidthHeight();\n        window.addEventListener('resize', this.updateWidthHeight)\n    };\n\n    /**\n     * get diameter\n     * @returns {*}\n     */\n\n    getDiameter = () => {\n        let {diameter, resize} = this.state;\n        let getMaxResWidth = this.getMaxResize(resize);\n        let newDiameter = this.matchesWindow(resize);\n        if(this.state.responsive){\n            if(window.matchMedia(`(min-width: ${getMaxResWidth + 1}px)`).matches){\n                return (newDiameter > diameter)?(newDiameter):(diameter);\n            }else{\n                return newDiameter;\n            }\n        }else{\n            return diameter;\n        }\n    };\n\n    /**\n     * update width and height\n     */\n\n    updateWidthHeight = () => {\n        let {beyond} = this.state;\n        let naturalWidth = this.firstImg.naturalWidth;\n        let naturalHeight = this.firstImg.naturalHeight;\n        let percent = naturalWidth / naturalHeight;\n        let width = this.firstImg.clientWidth;\n        let height = Math.round((width / percent));\n        let dim = this.getDiameter();\n        //console.log(window.screen.width);\n        let centerX = 0;\n        let centerY = 0;\n        let sensor;\n\n        if(beyond){\n            sensor = {\n                width: width + dim,\n                height: height + dim,\n                top: -(dim / 2),\n                left: -(dim / 2)\n            }\n        }else{\n            sensor = {\n                width: width,\n                height: height,\n                top: 0,\n                left: 0\n            }\n        }\n        this.centerY = Math.round(height/2)+Math.round(dim/2);\n        this.centerX = Math.round(width/2)+Math.round(dim/2);\n        // console.log(width + ' ' + height + ' ' + dim);\n        this.setState({\n            width,\n            height,\n            dim,\n            sensor,\n            centerX,\n            centerY\n        });\n    };\n\n    /**\n     * get max width for diameter\n     * @param diameter\n     * @returns {number|Screen}\n     */\n\n    getMaxResize = (diameter) => {\n        let newDiameter = diameter[0].screen;\n        for(let i = 0; i < diameter.length; i++){\n            if(diameter[i].screen > newDiameter){\n                newDiameter = diameter[i].screen;\n            }\n        }\n        return newDiameter;\n    };\n\n    /**\n     * @param diameter\n     * @returns {number|Screen}\n     */\n\n    matchesWindow = (diameter) => {\n        let newDiameter = diameter[0].diameter;\n        for(let i = 0; i < diameter.length; i++){\n            if(window.matchMedia(`(max-width: ${diameter[i].screen}px)`).matches){\n                newDiameter = diameter[i].diameter;\n            }\n        }\n        return newDiameter;\n    };\n\n    /**\n     * hover sensor get position zoom and photo\n     * @param event\n     */\n\n    HoverSensor = (event) => {\n\n        let positionX = event.layerX + this.centerX;\n        let positionY = event.layerY + this.centerY;\n        console.log(positionX + ' ' + event.layerX);\n        console.log(positionY + ' ' + event.layerY);\n        let {sensor, dim, beyond} = this.state;\n\n        let position = {\n            startY: 0,\n            endY: sensor.height,\n            startX: 0,\n            endX: sensor.width\n        };\n\n        let coefficient = dim / 2;\n\n        let zoomPosition;\n\n        if(beyond){\n            zoomPosition = dim / 2;\n        }else{\n            zoomPosition = 0;\n        }\n\n        if((positionY >= position.startY + coefficient) && (positionY <= position.endY - coefficient)){\n            this.zoom.style.top = `${positionY - coefficient - zoomPosition}px`;\n            this.lastImg.style.top = `${-positionY + coefficient + zoomPosition}px`;\n        }else if(positionY < position.startY + coefficient){\n            this.zoom.style.top = `${position.startY - zoomPosition}px`;\n            this.lastImg.style.top = `${position.startY + zoomPosition}px`;\n        }else if(positionY > position.endY - coefficient){\n            this.zoom.style.top = `${position.endY - dim - zoomPosition}px`;\n            this.lastImg.style.top = `${-position.endY + dim + zoomPosition}px`;\n        }\n\n        if((positionX >= position.startX + coefficient) && (positionX <= position.endX - coefficient)){\n            this.zoom.style.left = `${positionX - coefficient - zoomPosition}px`;\n            this.lastImg.style.left = `${-positionX + coefficient + zoomPosition}px`;\n        }else if(positionX < position.startX + coefficient){\n            this.zoom.style.left = `${position.startX - zoomPosition}px`;\n            this.lastImg.style.left = `${position.startX + zoomPosition}px`;\n        }else if(positionX > position.endX - coefficient){\n            this.zoom.style.left = `${position.endX - dim - zoomPosition}px`;\n            this.lastImg.style.left = `${-position.endX +  dim + zoomPosition}px`;\n        }\n        this.setState({centerX:event.layerX,centerY:event.layerY});\n       // console.log(this.zoom.style.left + ' xx  ' + positionX + ' endxx' + position.endX);\n        //console.log(this.zoom.style.top + ' yy ' + positionY + 'endyy' + position.endY);\n    };\n\n    /**\n     * move mouse\n     * @param event\n     */\n\n    move = (event) => {\n        let {transform} = this.state;\n        if(transform){\n            this.setState({\n                transform: false\n            });\n        }\n\n        this.HoverSensor(event);\n    };\n    onLeftPress = () =>{\n        if(this.state.centerX+Math.round(this.state.width/2)<=0)\n        {   return ;\n        }\n        this.move({\n            layerX:this.state.centerX-10,\n            layerY:this.state.centerY\n            });\n    }\n    onRightPress = () =>{\n        if(this.state.centerX >=Math.round(this.state.width/2))\n        {   return ;\n        }\n        this.move({\n            layerX:this.state.centerX+10,\n            layerY:this.state.centerY\n            });\n    }\n    onTopPress = () =>{\n        if(this.state.centerY+Math.round(this.state.height/2)<=0)\n        {   return ;\n        }\n        this.move({\n            layerX:this.state.centerX,\n            layerY:this.state.centerY-10\n            });\n    }\n    onBottomPress = () =>{\n        if(this.state.centerY >=Math.round(this.state.height/2))\n        {   return ;\n        }\n        this.move({\n            layerX:this.state.centerX,\n            layerY:this.state.centerY+10\n            });\n    }\n    render(){\n        let {\n            images,\n            cursor,\n            transform,\n            width,\n            height,\n            dim,\n            sensor,\n            type\n        } = this.state;\n        let parentClass = (cursor)?('x-ray-photo-parent'):('x-ray-photo-parent cursor-none');\n        let parentTransform = (transform)?('x-ray-last-photo transform'):('x-ray-last-photo');\n        let lastImage = (transform)?('x-ray-last-photo-img transform'):('x-ray-last-photo-img');\n        let lastStyle = {\n            width: `${dim}px`,\n            height: `${dim}px`\n        };\n        return(\n            <Aux>\n            <div className={parentClass}>\n                <img\n                    ref={(img)=>{\n                        this.firstImg = img;\n                        //console.log(\"image1\");\n                        //if(img!=null)\n                        // {console.log(this.firstImg.style.top);\n                        // console.log(this.firstImg.style.left);\n                        //}\n                    }}\n                    src={images[0]}\n                    alt=\"first-photo\"\n                    className=\"x-ray-first-photo\"\n                />\n                <div\n                    ref={(zoom)=>{\n                        this.zoom = zoom;\n                        //console.log(zoom);\n                    }}\n                    className={parentTransform}\n                    style={lastStyle}\n                >\n                    {\n                        (type === 'magnifyingGlass')?(\n                            <div className=\"magnifyingGlass\"></div>\n                        ):(null)\n                    }\n                    <div className=\"x-ray-last-photo-img-parent\">\n                        <img\n                            ref={(img)=>{\n                                this.lastImg = img;\n                                ///console.log(img + \"image2\");\n                            }}\n                            style={{width: `${width}px`, height: `${height}px`}}\n                            src={images[1]}\n                            alt=\"last-photo\"\n                            className={lastImage}\n                        />\n                    </div>\n                </div>\n                <div className=\"x-ray-sensor\" style={sensor} onMouseMove={this.move}></div>\n            </div>\n            <div className=\"Buttons\">\n                <Button clicked={this.onLeftPress}>Left</Button>\n                <Button clicked={this.onRightPress}>Right</Button>\n                <Button clicked={this.onBottomPress}>Bottom</Button>\n                <Button clicked={this.onTopPress}>Top</Button>\n            </div>\n            </Aux>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}