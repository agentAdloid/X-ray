{"ast":null,"code":"var _jsxFileName = \"/home/agenta/Desktop/Adloid/x-ray/src/components/Xray/Xray.js\";\nimport React, { Component } from 'react';\nimport './Xray.css';\nimport Aux from '../../hoc/Aux';\nimport Button from '../../UI/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class XRay extends Component {\n  constructor(props) {\n    super(props); //console.log('hi');\n    //console.log('bi');\n\n    this.componentDidMount = () => {\n      this.updateWidthHeight();\n      window.addEventListener('resize', this.updateWidthHeight);\n    };\n\n    this.getDiameter = () => {\n      let {\n        diameter,\n        resize\n      } = this.state;\n      let getMaxResWidth = this.getMaxResize(resize);\n      let newDiameter = this.matchesWindow(resize);\n\n      if (this.state.responsive) {\n        if (window.matchMedia(`(min-width: ${getMaxResWidth + 1}px)`).matches) {\n          return newDiameter > diameter ? newDiameter : diameter;\n        } else {\n          return newDiameter;\n        }\n      } else {\n        return diameter;\n      }\n    };\n\n    this.updateWidthHeight = () => {\n      let {\n        beyond\n      } = this.state;\n      let naturalWidth = this.firstImg.naturalWidth;\n      let naturalHeight = this.firstImg.naturalHeight;\n      let percent = naturalWidth / naturalHeight;\n\n      if (percent == NaN) {\n        percent = 1.5;\n      }\n\n      let width = this.firstImg.clientWidth;\n      let height = Math.round(width / percent);\n      let dim = this.getDiameter(); //console.log(window.screen.width);\n\n      let centerX = 0;\n      let centerY = 0;\n      let sensor;\n\n      if (beyond) {\n        sensor = {\n          width: width + dim,\n          height: height + dim,\n          top: -(dim / 2),\n          left: -(dim / 2)\n        };\n      } else {\n        sensor = {\n          width: width,\n          height: height,\n          top: 0,\n          left: 0\n        };\n      }\n\n      centerY = Math.round(height / 2) + Math.round(dim / 2);\n      centerX = Math.round(width / 2) + Math.round(dim / 2);\n      console.log(centerX + \" cc \" + centerY + percent); // console.log(width + ' ' + height + ' ' + dim);\n\n      this.setState({\n        width,\n        height,\n        dim,\n        sensor,\n        centerX,\n        centerY\n      });\n    };\n\n    this.getMaxResize = diameter => {\n      let newDiameter = diameter[0].screen;\n\n      for (let i = 0; i < diameter.length; i++) {\n        if (diameter[i].screen > newDiameter) {\n          newDiameter = diameter[i].screen;\n        }\n      }\n\n      return newDiameter;\n    };\n\n    this.matchesWindow = diameter => {\n      let newDiameter = diameter[0].diameter;\n\n      for (let i = 0; i < diameter.length; i++) {\n        if (window.matchMedia(`(max-width: ${diameter[i].screen}px)`).matches) {\n          newDiameter = diameter[i].diameter;\n        }\n      }\n\n      return newDiameter;\n    };\n\n    this.HoverSensor = event => {\n      let positionX = event.layerX;\n      let positionY = event.layerY;\n      console.log(\"x\" + event.layerX);\n      console.log(\"y\" + event.layerY);\n      let {\n        sensor,\n        dim,\n        beyond\n      } = this.state;\n      let position = {\n        startY: 0,\n        endY: sensor.height,\n        startX: 0,\n        endX: sensor.width\n      };\n      let coefficient = dim / 2;\n      let zoomPosition;\n\n      if (beyond) {\n        zoomPosition = dim / 2;\n      } else {\n        zoomPosition = 0;\n      }\n\n      if (positionY >= position.startY + coefficient && positionY <= position.endY - coefficient) {\n        this.zoom.style.top = `${positionY - coefficient - zoomPosition}px`;\n        this.lastImg.style.top = `${-positionY + coefficient + zoomPosition}px`;\n      } else if (positionY < position.startY + coefficient) {\n        this.zoom.style.top = `${position.startY - zoomPosition}px`;\n        this.lastImg.style.top = `${position.startY + zoomPosition}px`;\n      } else if (positionY > position.endY - coefficient) {\n        this.zoom.style.top = `${position.endY - dim - zoomPosition}px`;\n        this.lastImg.style.top = `${-position.endY + dim + zoomPosition}px`;\n      }\n\n      if (positionX >= position.startX + coefficient && positionX <= position.endX - coefficient) {\n        this.zoom.style.left = `${positionX - coefficient - zoomPosition}px`;\n        this.lastImg.style.left = `${-positionX + coefficient + zoomPosition}px`;\n      } else if (positionX < position.startX + coefficient) {\n        this.zoom.style.left = `${position.startX - zoomPosition}px`;\n        this.lastImg.style.left = `${position.startX + zoomPosition}px`;\n      } else if (positionX > position.endX - coefficient) {\n        this.zoom.style.left = `${position.endX - dim - zoomPosition}px`;\n        this.lastImg.style.left = `${-position.endX + dim + zoomPosition}px`;\n      }\n\n      this.setState({\n        centerX: event.layerX,\n        centerY: event.layerY\n      }); // console.log(this.zoom.style.left + ' xx  ' + positionX + ' endxx' + position.endX);\n      //console.log(this.zoom.style.top + ' yy ' + positionY + 'endyy' + position.endY);\n    };\n\n    this.move = event => {\n      let {\n        transform\n      } = this.state;\n\n      if (transform) {\n        this.setState({\n          transform: false\n        });\n      }\n\n      this.HoverSensor(event);\n    };\n\n    this.onLeftPress = () => {\n      if (this.state.centerX + Math.round(this.state.dim / 2) <= 0) {\n        return;\n      }\n\n      this.move({\n        layerX: this.state.centerX - 10,\n        layerY: this.state.centerY\n      });\n    };\n\n    this.onRightPress = () => {\n      if (this.state.centerX >= Math.round(this.state.width) + Math.round(this.state.dim / 2)) {\n        return;\n      }\n\n      this.move({\n        layerX: this.state.centerX + 10,\n        layerY: this.state.centerY\n      });\n    };\n\n    this.onTopPress = () => {\n      if (this.state.centerY + Math.round(this.state.dim / 2) <= 0) {\n        return;\n      }\n\n      this.move({\n        layerX: this.state.centerX,\n        layerY: this.state.centerY - 10\n      });\n    };\n\n    this.onBottomPress = () => {\n      if (this.state.centerX >= Math.round(this.state.height) + Math.round(this.state.dim / 2)) {\n        return;\n      }\n\n      this.move({\n        layerX: this.state.centerX,\n        layerY: this.state.centerY + 10\n      });\n    };\n\n    this.state = {\n      transform: true,\n      images: this.props.images,\n      cursor: this.props.cursor || false,\n      diameter: this.props.diameter || 150,\n      beyond: this.props.beyond || false,\n      width: null,\n      height: null,\n      dim: null,\n      type: this.props.type || 'circle',\n      sensor: {\n        width: null,\n        height: null,\n        top: null,\n        left: null\n      },\n      responsive: this.props.responsive || false,\n      resize: this.props.resize || [{\n        screen: 1199,\n        diameter: 130\n      }, {\n        screen: 991,\n        diameter: 100\n      }, {\n        screen: 767,\n        diameter: 80\n      }, {\n        screen: 575,\n        diameter: 50\n      }],\n      centerX: 0,\n      centerY: 0\n    };\n    this.move = this.move.bind(this);\n  }\n\n  render() {\n    let {\n      images,\n      cursor,\n      transform,\n      width,\n      height,\n      dim,\n      sensor,\n      type\n    } = this.state;\n    let parentClass = cursor ? 'x-ray-photo-parent' : 'x-ray-photo-parent cursor-none';\n    let parentTransform = transform ? 'x-ray-last-photo transform' : 'x-ray-last-photo';\n    let lastImage = transform ? 'x-ray-last-photo-img transform' : 'x-ray-last-photo-img';\n    let lastStyle = {\n      width: `${dim}px`,\n      height: `${dim}px`\n    };\n    return /*#__PURE__*/_jsxDEV(Aux, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: parentClass,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          ref: img => {\n            this.firstImg = img;\n            console.log('firstImg is accesable'); //console.log(\"image1\");\n            //if(img!=null)\n            // {console.log(this.firstImg.style.top);\n            // console.log(this.firstImg.style.left);\n            //}\n          },\n          src: images[0],\n          alt: \"first-photo\",\n          className: \"x-ray-first-photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: zoom => {\n            this.zoom = zoom; //console.log(zoom);\n          },\n          className: parentTransform,\n          style: lastStyle,\n          children: [type === 'magnifyingGlass' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"magnifyingGlass\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 29\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"x-ray-last-photo-img-parent\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              ref: img => {\n                this.lastImg = img; ///console.log(img + \"image2\");\n              },\n              style: {\n                width: `${width}px`,\n                height: `${height}px`\n              },\n              src: images[1],\n              alt: \"last-photo\",\n              className: lastImage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Buttons\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          clicked: this.onLeftPress,\n          children: \"Left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          clicked: this.onRightPress,\n          children: \"Right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          clicked: this.onBottomPress,\n          children: \"Bottom\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          clicked: this.onTopPress,\n          children: \"Top\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/agenta/Desktop/Adloid/x-ray/src/components/Xray/Xray.js"],"names":["React","Component","Aux","Button","XRay","constructor","props","componentDidMount","updateWidthHeight","window","addEventListener","getDiameter","diameter","resize","state","getMaxResWidth","getMaxResize","newDiameter","matchesWindow","responsive","matchMedia","matches","beyond","naturalWidth","firstImg","naturalHeight","percent","NaN","width","clientWidth","height","Math","round","dim","centerX","centerY","sensor","top","left","console","log","setState","screen","i","length","HoverSensor","event","positionX","layerX","positionY","layerY","position","startY","endY","startX","endX","coefficient","zoomPosition","zoom","style","lastImg","move","transform","onLeftPress","onRightPress","onTopPress","onBottomPress","images","cursor","type","bind","render","parentClass","parentTransform","lastImage","lastStyle","img"],"mappings":"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","sourcesContent":["\nimport React, {Component} from 'react';\nimport './Xray.css';\nimport Aux from '../../hoc/Aux';\nimport Button from '../../UI/Button';\nexport default class XRay extends Component{\n    constructor(props){\n        super(props);\n        //console.log('hi');\n        //console.log('bi');\n        this.state = {\n            transform: true,\n            images: this.props.images,\n            cursor: this.props.cursor || false,\n            diameter: this.props.diameter || 150,\n            beyond: this.props.beyond || false,\n            width: null,\n            height: null,\n            dim: null,\n            type: this.props.type || 'circle',\n            sensor: {\n                width: null,\n                height: null,\n                top: null,\n                left: null\n            },\n            responsive: this.props.responsive || false,\n            resize: this.props.resize || [\n                {\n                    screen: 1199,\n                    diameter: 130\n                },\n                {\n                    screen: 991,\n                    diameter: 100\n                },\n                {\n                    screen: 767,\n                    diameter: 80\n                },\n                {\n                    screen: 575,\n                    diameter: 50\n                }\n            ],\n            centerX: 0 ,\n            centerY: 0\n        };\n        this.move = this.move.bind(this);\n    }\n\n    componentDidMount = () =>{\n        this.updateWidthHeight();\n        window.addEventListener('resize', this.updateWidthHeight);\n    };\n\n    /**\n     * get diameter\n     * @returns {*}\n     */\n\n    getDiameter = () => {\n        let {diameter, resize} = this.state;\n        let getMaxResWidth = this.getMaxResize(resize);\n        let newDiameter = this.matchesWindow(resize);\n        if(this.state.responsive){\n            if(window.matchMedia(`(min-width: ${getMaxResWidth + 1}px)`).matches){\n                return (newDiameter > diameter)?(newDiameter):(diameter);\n            }else{\n                return newDiameter;\n            }\n        }else{\n            return diameter;\n        }\n    };\n\n    /**\n     * update width and height\n     */\n\n    updateWidthHeight = () => {\n        let {beyond} = this.state;\n        let naturalWidth = this.firstImg.naturalWidth;\n        let naturalHeight = this.firstImg.naturalHeight;\n        let percent = naturalWidth / naturalHeight;\n        if(percent==NaN)\n        {   percent = 1.5;\n        }\n        let width = this.firstImg.clientWidth;\n        let height = Math.round((width / percent));\n        let dim = this.getDiameter();\n        //console.log(window.screen.width);\n        let centerX = 0;\n        let centerY = 0;\n        let sensor;\n        if(beyond){\n            sensor = {\n                width: width + dim,\n                height: height + dim,\n                top: -(dim / 2),\n                left: -(dim / 2)\n            }\n        }else{\n            sensor = {\n                width: width,\n                height: height,\n                top: 0,\n                left: 0\n            }\n        }\n        centerY = Math.round(height/2)+Math.round(dim/2);\n        centerX = Math.round(width/2)+Math.round(dim/2);\n        console.log(centerX + \" cc \" + centerY + percent);\n        // console.log(width + ' ' + height + ' ' + dim);\n        this.setState({\n            width,\n            height,\n            dim,\n            sensor,\n            centerX,\n            centerY\n        });\n    };\n\n    /**\n     * get max width for diameter\n     * @param diameter\n     * @returns {number|Screen}\n     */\n\n    getMaxResize = (diameter) => {\n        let newDiameter = diameter[0].screen;\n        for(let i = 0; i < diameter.length; i++){\n            if(diameter[i].screen > newDiameter){\n                newDiameter = diameter[i].screen;\n            }\n        }\n        return newDiameter;\n    };\n\n    /**\n     * @param diameter\n     * @returns {number|Screen}\n     */\n\n    matchesWindow = (diameter) => {\n        let newDiameter = diameter[0].diameter;\n        for(let i = 0; i < diameter.length; i++){\n            if(window.matchMedia(`(max-width: ${diameter[i].screen}px)`).matches){\n                newDiameter = diameter[i].diameter;\n            }\n        }\n        return newDiameter;\n    };\n\n    /**\n     * hover sensor get position zoom and photo\n     * @param event\n     */\n\n    HoverSensor = (event) => {\n\n        let positionX = event.layerX ;\n        let positionY = event.layerY ;\n        console.log(\"x\" + event.layerX);\n        console.log(\"y\" + event.layerY);\n        let {sensor, dim, beyond} = this.state;\n\n        let position = {\n            startY: 0,\n            endY: sensor.height,\n            startX: 0,\n            endX: sensor.width\n        };\n\n        let coefficient = dim / 2;\n\n        let zoomPosition;\n\n        if(beyond){\n            zoomPosition = dim / 2;\n        }else{\n            zoomPosition = 0;\n        }\n\n        if((positionY >= position.startY + coefficient) && (positionY <= position.endY - coefficient)){\n            this.zoom.style.top = `${positionY - coefficient - zoomPosition}px`;\n            this.lastImg.style.top = `${-positionY + coefficient + zoomPosition}px`;\n        }else if(positionY < position.startY + coefficient){\n            this.zoom.style.top = `${position.startY - zoomPosition}px`;\n            this.lastImg.style.top = `${position.startY + zoomPosition}px`;\n        }else if(positionY > position.endY - coefficient){\n            this.zoom.style.top = `${position.endY - dim - zoomPosition}px`;\n            this.lastImg.style.top = `${-position.endY + dim + zoomPosition}px`;\n        }\n\n        if((positionX >= position.startX + coefficient) && (positionX <= position.endX - coefficient)){\n            this.zoom.style.left = `${positionX - coefficient - zoomPosition}px`;\n            this.lastImg.style.left = `${-positionX + coefficient + zoomPosition}px`;\n        }else if(positionX < position.startX + coefficient){\n            this.zoom.style.left = `${position.startX - zoomPosition}px`;\n            this.lastImg.style.left = `${position.startX + zoomPosition}px`;\n        }else if(positionX > position.endX - coefficient){\n            this.zoom.style.left = `${position.endX - dim - zoomPosition}px`;\n            this.lastImg.style.left = `${-position.endX +  dim + zoomPosition}px`;\n        }\n        this.setState({centerX:event.layerX,centerY:event.layerY});\n       // console.log(this.zoom.style.left + ' xx  ' + positionX + ' endxx' + position.endX);\n        //console.log(this.zoom.style.top + ' yy ' + positionY + 'endyy' + position.endY);\n    };\n\n    /**\n     * move mouse\n     * @param event\n     */\n\n    move = (event) => {\n        let {transform} = this.state;\n        if(transform){\n            this.setState({\n                transform: false\n            });\n        }\n\n        this.HoverSensor(event);\n    };\n    onLeftPress = () =>{\n        if(this.state.centerX+Math.round(this.state.dim/2)<=0)\n        {   return ;\n        }\n        this.move({\n            layerX:this.state.centerX-10,\n            layerY:this.state.centerY\n            });\n    }\n    onRightPress = () =>{\n        if(this.state.centerX >=Math.round(this.state.width)+Math.round(this.state.dim/2))\n        {   return ;\n        }\n        this.move({\n            layerX:this.state.centerX+10,\n            layerY:this.state.centerY\n            });\n    }\n    onTopPress = () =>{\n        if(this.state.centerY+Math.round(this.state.dim/2)<=0)\n        {   return ;\n        }\n        this.move({\n            layerX:this.state.centerX,\n            layerY:this.state.centerY-10\n            });\n    }\n    onBottomPress = () =>{\n        if(this.state.centerX >=Math.round(this.state.height)+Math.round(this.state.dim/2))\n        {   return ;\n        }\n        this.move({\n            layerX:this.state.centerX,\n            layerY:this.state.centerY+10\n            });\n    }\n    render(){\n        let {\n            images,\n            cursor,\n            transform,\n            width,\n            height,\n            dim,\n            sensor,\n            type\n        } = this.state;\n        let parentClass = (cursor)?('x-ray-photo-parent'):('x-ray-photo-parent cursor-none');\n        let parentTransform = (transform)?('x-ray-last-photo transform'):('x-ray-last-photo');\n        let lastImage = (transform)?('x-ray-last-photo-img transform'):('x-ray-last-photo-img');\n        let lastStyle = {\n            width: `${dim}px`,\n            height: `${dim}px`\n        };\n        return(\n            <Aux>\n            <div className={parentClass}>\n                <img\n                    ref={(img)=>{\n                        this.firstImg = img;\n                        console.log('firstImg is accesable');\n                        //console.log(\"image1\");\n                        //if(img!=null)\n                        // {console.log(this.firstImg.style.top);\n                        // console.log(this.firstImg.style.left);\n                        //}\n                    }}\n                    src={images[0]}\n                    alt=\"first-photo\"\n                    className=\"x-ray-first-photo\"\n                />\n                <div\n                    ref={(zoom)=>{\n                        this.zoom = zoom;\n                        //console.log(zoom);\n                    }}\n                    className={parentTransform}\n                    style={lastStyle}\n                >\n                    {\n                        (type === 'magnifyingGlass')?(\n                            <div className=\"magnifyingGlass\"></div>\n                        ):(null)\n                    }\n                    <div className=\"x-ray-last-photo-img-parent\">\n                        <img\n                            ref={(img)=>{\n                                this.lastImg = img;\n                                ///console.log(img + \"image2\");\n                            }}\n                            style={{width: `${width}px`, height: `${height}px`}}\n                            src={images[1]}\n                            alt=\"last-photo\"\n                            className={lastImage}\n                        />\n                    </div>\n                </div>\n                {/* <div className=\"x-ray-sensor\" style={sensor} onMouseMove={this.move}></div> */}\n            </div>\n            <div className=\"Buttons\">\n                <Button clicked={this.onLeftPress}>Left</Button>\n                <Button clicked={this.onRightPress}>Right</Button>\n                <Button clicked={this.onBottomPress}>Bottom</Button>\n                <Button clicked={this.onTopPress}>Top</Button>\n            </div>\n            </Aux>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}